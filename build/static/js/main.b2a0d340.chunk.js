(this["webpackJsonpecoleta-web"]=this["webpackJsonpecoleta-web"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/logo.47c4581a.svg"},48:function(e,t,a){e.exports=a(80)},53:function(e,t,a){},54:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(43),r=a.n(l),o=a(14),i=a(15),m=a(19),u=a(17),s=(a(53),a(16)),p=a(4),d=a(18),E=(a(54),a(22)),b=a.n(E),f=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{id:"page-home"},c.a.createElement("div",{className:"content"},c.a.createElement("header",null,c.a.createElement("img",{src:b.a,alt:"Logo do Ecoleta"})),c.a.createElement("main",null,c.a.createElement("h1",null,"Seu marketplace de coleta de res\xedduos."),c.a.createElement("p",null,"Ajudamos pessoas a encontrarem pontos de coleta de forma eficiente."),c.a.createElement(s.b,{to:"/points/create"},c.a.createElement("span",null,c.a.createElement(d.b,null)),c.a.createElement("strong",null,"Cadastre um ponto de coleta")))))}}]),a}(n.Component),g=a(31),j=a.n(g),O=a(44),h=a(47),v=a(25),y=a(32),S=a(7),C=a(83),k=a(84),N=a(82),x=a(21),F=a.n(x),w=F.a.create({baseURL:"http://localhost:3333/"}),L=a(46),U=(a(78),function(e){var t=e.onFileUploaded,a=Object(n.useState)(""),l=Object(S.a)(a,2),r=l[0],o=l[1],i=Object(n.useCallback)((function(e){var a=e[0],n=URL.createObjectURL(a);o(n),t(a)}),[t]),m=Object(L.a)({onDrop:i,accept:"image/*"}),u=m.getRootProps,s=m.getInputProps;return c.a.createElement("div",Object.assign({className:"dropzone"},u()),c.a.createElement("input",Object.assign({},s(),{accept:"image/*"})),r?c.a.createElement("img",{src:r,alt:"Miniatura da imagem do estabelecimento"}):c.a.createElement("p",null,c.a.createElement(d.c,null),"Imagem do estabelecimento"))});a(79);var D=function(){var e=Object(n.useState)(),t=Object(S.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)([0,0]),o=Object(S.a)(r,2),i=o[0],m=o[1],u=Object(n.useState)([0,0]),E=Object(S.a)(u,2),f=E[0],g=E[1],x=Object(n.useState)([]),L=Object(S.a)(x,2),D=L[0],I=L[1],P=Object(n.useState)(""),R=Object(S.a)(P,2),z=R[0],B=R[1],M=Object(n.useState)([]),J=Object(S.a)(M,2),A=J[0],V=J[1],_=Object(n.useState)(""),q=Object(S.a)(_,2),G=q[0],H=q[1],K=Object(n.useState)([]),Q=Object(S.a)(K,2),T=Q[0],W=Q[1],X=Object(n.useState)([]),Y=Object(S.a)(X,2),Z=Y[0],$=Y[1],ee=Object(n.useState)({summary:"",email:"",phone:""}),te=Object(S.a)(ee,2),ae=te[0],ne=te[1],ce=Object(p.e)();function le(e){var t=e.target,a=t.name,n=t.value;ne(Object(y.a)(Object(y.a)({},ae),{},Object(v.a)({},a,n)))}function re(){return(re=Object(O.a)(j.a.mark((function e(t){var n,c,l,r,o,i,m,u,s,p;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=ae.summary,c=ae.email,l=ae.phone,r=z,o=G,i=Object(S.a)(f,2),m=i[0],u=i[1],s=Z,(p=new FormData).append("summary",n),p.append("email",c),p.append("phone",l),p.append("latitude",String(m)),p.append("longitude",String(u)),p.append("state",r),p.append("city",o),p.append("categories",s.join(",")),a&&p.append("image",a),e.next=18,w.post("points",p);case 18:alert("Ponto de coleta criado com sucesso!"),ce.push("/");case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;m([a,n])}))}),[]),Object(n.useEffect)((function(){w.get("categories").then((function(e){W(e.data)}))}),[]),Object(n.useEffect)((function(){F.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome").then((function(e){var t=e.data.map((function(e){return{initials:e.sigla,name:e.nome}}));I(t)}))}),[]),Object(n.useEffect)((function(){void 0!==z&&F.a.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(z,"/municipios?orderBy=nome")).then((function(e){var t=e.data.map((function(e){return{id:e.id,name:e.nome}}));V(t)}))}),[z]),c.a.createElement("div",{id:"page-create-point"},c.a.createElement("header",null,c.a.createElement("img",{src:b.a,alt:"Logo do Ecoleta"}),c.a.createElement(s.b,{to:"/"},c.a.createElement("span",null,c.a.createElement(d.a,null)),c.a.createElement("span",null,"Voltar para a home"))),c.a.createElement("form",{action:"",onSubmit:function(e){return re.apply(this,arguments)}},c.a.createElement("h1",null,"Cadastro do ponto de coleta"),c.a.createElement(U,{onFileUploaded:l}),c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("h2",null,"Dados")),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"summary"},"Estabelecimento"),c.a.createElement("input",{type:"text",name:"summary",id:"summary",onChange:le})),c.a.createElement("div",{className:"field-group"},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"name"},"E-mail"),c.a.createElement("input",{type:"email",name:"email",id:"email",onChange:le})),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"name"},"Celular"),c.a.createElement("input",{type:"text",name:"phone",id:"phone",onChange:le})))),c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("h2",null,"Endere\xe7o"),c.a.createElement("span",null,"Selecione o endere\xe7o no mapa")),c.a.createElement(C.a,{center:i,zoom:15,onClick:function(e){g([e.latlng.lat,e.latlng.lng])}},c.a.createElement(k.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),c.a.createElement(N.a,{position:f})),c.a.createElement("div",{className:"field-group"},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"state"},"Estado"),c.a.createElement("select",{name:"state",id:"state",value:z,onChange:function(e){B(e.target.value)}},c.a.createElement("option",{value:""},"Selectione o estado"),D.map((function(e){return c.a.createElement("option",{key:e.initials,value:e.initials},e.name)})))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"city"},"Cidade"),c.a.createElement("select",{name:"city",id:"city",onChange:function(e){H(e.target.value)}},c.a.createElement("option",{value:""},"Selectione a cidade"),A.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.name)})))))),c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("h2",null,"Categorias de coleta"),c.a.createElement("span",null,"Selecione um ou mais \xedtens abaixo")),c.a.createElement("ul",{className:"items-grid"},T.map((function(e){return c.a.createElement("li",{key:e.id,onClick:function(){return function(e){var t=[];t=Z.findIndex((function(t){return t===e}))>=0?Z.filter((function(t){return t!==e})):[].concat(Object(h.a)(Z),[e]),$(t)}(e.id)},className:Z.includes(e.id)?"selected":""},c.a.createElement("img",{src:e.image_url,alt:e.name}),c.a.createElement("span",null,e.name))})))),c.a.createElement("button",{type:"submit"},"Cadastrar")))},I=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement(s.a,null,c.a.createElement(p.a,{component:f,path:"/",exact:!0}),c.a.createElement(p.a,{component:D,path:"/points/create"}))}}]),a}(n.Component),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return c.a.createElement(I,null)}}]),a}(n.Component);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(P,null)),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.b2a0d340.chunk.js.map